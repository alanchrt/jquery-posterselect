(function(a){a.posterselect={popups:[],counter:0,init_slider:function(b,c){a.posterselect.popups[b].slider.init(c)}};a.fn.extend({posterselect:function(b){var d={time:"2",conversion_url:"./?time=%s",callback:function(f,e){}};var b=a.extend(d,b);var c=function(g){var h=a.extend({},b);var e=this;var f=g.attr("href").split("#");e.video={url:f[0]};e.obj=a("<div></div>").addClass("posterselect");e.obj.css("top",g.offset().top+g.height());e.obj.css("left",g.offset().left);a("body").append(e.obj);e.obj.fadeIn();e.close=function(){e.obj.remove()};e.loading=a("<div></div>").addClass("posterselect-loading");e.loading.html("Loading...");e.obj.append(e.loading);e.slider={time:{set:function(i){e.slider.time.value=i;e.slider.indicator.set(i)},value:(f[1])?f[1]:h.time},init:function(i){e.slider.obj=a("<div></div>").addClass("posterselect-slider");e.slider.obj.slider({min:0,max:i,value:e.slider.time.value,slide:function(j,k){e.slider.time.set(k.value)},change:function(j,k){e.slider.time.set(k.value)}});e.obj.append(e.slider.obj);e.slider.indicator={set:function(j){this.hours=String((j/3600)|0);this.minutes=String((j/60-this.hours*60)|0);this.seconds=String(j%60);if(this.hours.length==1){this.hours="0"+this.hours}if(this.minutes.length==1){this.minutes="0"+this.minutes}if(this.seconds.length==1){this.seconds="0"+this.seconds}this.obj.html("<strong>Position:</strong> "+this.hours+":"+this.minutes+":"+this.seconds)},obj:a("<div></div>").addClass("posterselect-indicator")};e.slider.indicator.set(e.slider.time.value);e.obj.append(e.slider.indicator.obj);e.ok=a("<a></a>").addClass("posterselect-ok");e.ok.html("Ok");e.ok.addClass("ui-widget-content");e.ok.attr("href","#ok");e.obj.append(e.ok);e.cancel=a("<a></a>").addClass("posterselect-cancel");e.cancel.html("Cancel");e.cancel.attr("href","#cancel");e.cancel.click(function(j){j.preventDefault();e.close()});e.obj.append(e.cancel)}}};return this.each(function(){var f=a.extend({},b);var e=a(this);e.click(function(h){h.preventDefault();var g=a(this).data("popup");if(!g||g.obj.is(":hidden")){var g=new c(a(this));a(this).data("popup",g);a.posterselect.popups[a.posterselect.counter++]=g}else{g.close()}})})}})})(jQuery);